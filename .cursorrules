[Antigravity Constitution]
# This file defines the core programming constraints for the Bazi Predict project.

### 1. Architectural Integrity
- **MVC Pattern**: Strict adherence to Model-View-Controller.
  - `controllers/`: Logic only. No UI rendering code.
  - `ui/`: Design only. No heavy business logic.
  - `core/`: Pure physics/math engines. No UI or Controller dependencies.
- **Service Layer**: Cross-cutting concerns (Logging, Config, Notification) go to `services/` or singleton managers.
- **Controller Decomposition**: Avoid "God Object" controllers. Use specialized sub-controllers (e.g., `InputController`, `SimulationController`).

### 2. Code Quality & Style
- **Type Hinting**: Use Python type hints for all complex functions.
- **Docstrings**: Essential for public methods using Google Style.
- **Modularization**: No file > 500 lines if possible. Refactor into components.
- **Imports**: Absolute imports preferred (`from core.engine import ...`).

### 3. UI/UX Standards
- **Aesthetics**: "Mystic/Ancient Chinese" theme (Ink visuals, Serif fonts).
- **Control Panel**: "Mixer Console" style for tuning - all parameters visible, sliders expanded.
- **Localization**: UI must be primarily in Chinese (Simplified).

### 4. Testing & Validation
- **Regression Testing**: All core changes must pass `scripts/run_full_tests.py`.
- **Golden Data**: Critical physics changes must be validated against `tests/data/golden_master*.json`.
- **No Broken Builds**: Every commit/step must leave the system in a runnable state.

### 5. Configuration Management
- **Single Source of Truth**: `core/config_schema.py` defines the schema.
- **Persistence**: All tunable parameters must be saveable/loadable via `parameters.json`.
- **Hot-Loading**: Changing config should not require server restart.
