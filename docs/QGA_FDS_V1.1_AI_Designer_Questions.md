# 📋 FDS-V1.1 规范文档 - AI设计师沟通问题清单

## 🔴 高优先级（必须明确）

### 1. AI分析师的输出格式和数据结构 ✅ 已解决

**问题**：
- AI输出是JSON格式还是自然语言？
- 权重系数是否需要归一化（$\sum w_i = 1$）？
- SAI基准定标的具体格式是什么？
- 是否需要提供示例输出？

**AI设计师回复**：
- ✅ 格式要求：**JSON + 物理意象文本** 的混合结构
- ✅ 归一化约束：所有权重系数必须遵循 **Unit Vector Constraint**，即 $\sum_{i=1}^{5} w_i = 1$
- ✅ SAI基准定标：采用 $\text{SAI}_{calibration} = \{M: \text{敏感度}, O: \text{偏移量}\}$
- ✅ 标准输出模板：已提供（见 Technical Spec Addendum）

**参考文档**：`docs/QGA_FDS_V1.1_Technical_Spec_Addendum.md` 第1节

---

### 2. '科研纯净集'的筛选标准和大小 ✅ 已解决

**问题**：
- '科研纯净集'的筛选标准是什么？
- '正确答案库'的标签来源是什么？
- 是否需要人工标注？
- 纯净集的大小应该是多少？

**AI设计师回复**：
- ✅ 筛选标准 (Tier A)：必须包含精确到**时辰**的四柱，且具备至少 3 个**确定性人生节点**（如：2015结婚、2020晋升）
- ✅ 标签来源：采用 **"双向拟合"标注法**，即：人工名家批注（专家先验）+ 历史大事件回测（物理事实）
- ✅ 初始规模：V1.1 阶段锁定 **500 例** 黄金级 (Gold Standard) 案例

**参考文档**：`docs/QGA_FDS_V1.1_Technical_Spec_Addendum.md` 第2节

---

### 3. 非线性激活函数的选择和参数 ✅ 已解决

**问题**：
- 每个维度轴都需要激活函数吗？
- 激活函数的参数（如Sigmoid的斜率）如何确定？
- 临界值如何定义？
- 相变的具体表现是什么？

**AI设计师回复**：
- ✅ 激活函数：主要应用于 $\mathbf{E}$ (寿夭) 与 $\mathbf{M}$ (财富) 轴，采用 **Modified Sigmoid**
- ✅ 公式：$\sigma(x) = \frac{1}{1 + e^{-k(x - x_0)}}$，其中 $x_0$ 为临界值（崩塌点），$k$ 为应力斜率
- ✅ 相变定义：当库神能级 $E_{vault} > 0.8$ 且遇冲时，触发**量子隧穿 (Tunneling)**，能量倍率 $\beta$ 跃迁至 1.5x 以上

**参考文档**：`docs/QGA_FDS_V1.1_Technical_Spec_Addendum.md` 第3节

---

### 4. 大运流年耦合算法的数学形式 ✅ 已解决

**问题**：
- 耦合算法是张量积（$\otimes$）还是直和（$\oplus$）？
- 大运和流年的权重如何分配？
- 是否需要考虑地理因子（$\delta$）？

**AI设计师回复**：
- ✅ 数学形式：大运与流年采用 **张量积 ($\otimes$)** 产生交互效应，而非简单的线性叠加
- ✅ 公式：$\mathcal{T}_{final} = \mathcal{T}_{base} \otimes \omega_{luck} \oplus \Delta \mathcal{T}_{year}$
- ✅ 地理因子 ($\delta$)：作为**全局增益系数**作用于五行矢量场。例如：南方 $\delta_{fire} = 1.15$

**参考文档**：`docs/QGA_FDS_V1.1_Technical_Spec_Addendum.md` 第4节

---

## ⚠️ 中优先级（需要澄清）

### 5. 实时调优的范围和约束机制

**问题**：
- 这个范围是针对所有权重还是单个权重？
- 修正后是否需要重新归一化？
- 如何防止权重修正导致系统不稳定？

**建议**：
- 明确调优范围的应用方式
- 定义归一化规则
- 设计稳定性检查机制

---

### 6. 残差回归的触发条件和修正方式

**问题**：
- '不符'的判断标准是什么（阈值）？
- 参数修正的范围和方式是什么？
- 是否需要人工审核？

**建议**：
- 定义残差阈值（如：误差 > 20%）
- 明确参数修正的算法
- 设计人工审核流程

---

### 7. 双重盲测验证的具体指标和标准

**问题**：
- '合拍率'的计算方法是什么？
- 历史名造的数据来源是什么？
- GNN进化的时间表是什么？

**建议**：
- 定义合拍率的计算公式
- 明确历史名造数据的来源和标注方法
- 制定GNN进化的阶段性计划

---

## 💡 低优先级（可以后续完善）

### 8. GNN进化的时间表和实现路径

**问题**：
- GNN进化的时间表是什么？
- 实现路径是什么？

**建议**：
- 制定阶段性计划
- 明确技术路线

---

### 9. 历史名造数据的来源和标注方法

**问题**：
- 历史名造的数据来源是什么？
- 标注方法是什么？

**建议**：
- 建立历史名造数据库
- 设计标注规范

---

### 10. 相变的具体表现和判定标准

**问题**：
- 相变的具体表现是什么？
- 判定标准是什么？

**建议**：
- 定义相变的物理表现
- 设计判定算法

---

## 📝 与QGA-HR V1.0的对应关系

### ✅ 一致性检查

1. **五维轴定义一致**
   - FDS-V1.1: $\mathbf{E}, \mathbf{O}, \mathbf{M}, \mathbf{S}, \mathbf{R}$
   - QGA-HR V1.0: $w_E, w_O, w_M, w_S, w_R$

2. **张量投影算子对应**
   - FDS-V1.1: Step 1输出初始投影系数矩阵$\mathbf{W}$
   - QGA-HR V1.0: 模块II定义张量投影算子

3. **动力学演化对应**
   - FDS-V1.1: Step 4注册大运流年耦合算法
   - QGA-HR V1.0: 模块III动力学演化注册

4. **审计历史对应**
   - FDS-V1.1: Step 5专题全息注册
   - QGA-HR V1.0: 模块IV审计对撞历史

---

**创建日期**：2025-12-29  
**最后更新**：2025-12-29  
**状态**：✅ 高优先级问题已全部解决

---

## 📋 实施修正动作清单

根据AI设计师的回复，需要在注册表架构中追加以下**稳定性约束 (Stability Guards)**：

| 修正项 | 实施路径 | 目的 | 状态 |
| --- | --- | --- | --- |
| **权重归一化器** | 注入 `structure.normalizeWeights` 函数 | 防止权重发散导致计算结果超过 100 分。 | ⏳ 待实施 |
| **残差阈值报警** | 设置 `error_threshold = 0.2` | 当模拟结果与真实事件偏差 >20% 时，强制触发"参数审计"。 | ⏳ 待实施 |
| **刑冲保护锁** | 引入 `resolutionCost` | 模拟"贪合忘冲"的物理损耗，防止交互逻辑陷入死循环。 | ⏳ 待实施 |

**参考文档**：`docs/QGA_FDS_V1.1_Technical_Spec_Addendum.md` 修正动作章节

