# QGA V25.0 æ³¨å†Œæœºåˆ¶è§„èŒƒå®¡æŸ¥æŠ¥å‘Š

## å®¡æŸ¥æ—¥æœŸ
2024å¹´ï¼ˆå½“å‰ä¼šè¯ï¼‰

## å®¡æŸ¥èŒƒå›´

1. **PatternDefinitionRegistry** - æ ¼å±€å®šä¹‰æ³¨å†Œè¡¨
2. **NeuralRouterRegistry** - ç¥ç»ç½‘ç»œè·¯ç”±ä¸“é¢˜æ³¨å†Œè¡¨
3. **LogicRegistry** - QGAæ ¸å¿ƒé€»è¾‘æ³¨å†Œè¡¨
4. **ä¸“é¢˜ç›®å½•ç»“æ„** - `core/subjects/neural_router/`

## å‘ç°çš„é—®é¢˜

### âœ… 1. PatternDefinitionRegistry - ç¬¦åˆè§„èŒƒ

**ä½ç½®**: `core/models/pattern_definition_registry.py`

**å®¡æŸ¥ç»“æœ**:
- âœ… ä½¿ç”¨Pythonç±»å®ç°ï¼Œç¬¦åˆQGAçš„ä»£ç ç»„ç»‡è§„èŒƒ
- âœ… æ”¯æŒä»JSONæ–‡ä»¶åŠ è½½ï¼ˆè™½ç„¶å½“å‰æ˜¯ç¡¬ç¼–ç é»˜è®¤å€¼ï¼‰
- âœ… æ•°æ®ç»“æ„æ¸…æ™°ï¼Œä½¿ç”¨dataclasså®šä¹‰
- âœ… ä¸`PatternEngineRegistry`ï¼ˆ`core/models/pattern_engine.py`ï¼‰é…åˆè‰¯å¥½

**å»ºè®®**:
- è€ƒè™‘å°†é»˜è®¤å®šä¹‰ç§»åˆ°JSONæ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤
- å¯ä»¥è€ƒè™‘ä¸`NeuralRouterRegistry`çš„æ ¼å±€å®šä¹‰åˆå¹¶ï¼Œé¿å…é‡å¤

### âš ï¸ 2. NeuralRouterRegistry - éƒ¨åˆ†åç¦»è§„èŒƒ

**ä½ç½®**: `core/subjects/neural_router/registry.json`

**å®¡æŸ¥ç»“æœ**:
- âš ï¸ **é—®é¢˜1**: ä½¿ç”¨äº†ç‹¬ç«‹çš„JSONæ³¨å†Œè¡¨ï¼Œä¸QGAçš„`logic_manifest.json`æœºåˆ¶ä¸ä¸€è‡´
- âš ï¸ **é—®é¢˜2**: ä¸“é¢˜æœªæ³¨å†Œåˆ°`LogicRegistry`ä¸­ï¼Œæ— æ³•é€šè¿‡`LogicRegistry.get_items_by_layer("TOPIC")`è·å–
- âœ… æ•°æ®ç»“æ„åˆç†ï¼ŒåŒ…å«è·¯ç”±å‚æ•°ã€ç‰©ç†æ¨¡å‹ã€æ ¼å±€å®šä¹‰ç­‰
- âœ… ä¸“é¢˜ç›®å½•ç»“æ„ç¬¦åˆæ¨¡å—åŒ–ç»„ç»‡

**æ ‡å‡†æ ¼å¼å¯¹æ¯”**:

QGAæ ‡å‡†TOPICæ ¼å¼ï¼ˆæ¥è‡ª`logic_manifest.json`ï¼‰:
```json
{
  "MOD_XXX": {
    "id": "MOD_XXX",
    "name": "ä¸“é¢˜åç§°",
    "icon": "å›¾æ ‡",
    "layer": "TOPIC",
    "type": "TOPIC",
    "theme": "PATTERN_PHYSICS",
    "version": "X.X",
    "description": "æè¿°",
    "active": true,
    "dependencies": [],
    "linked_rules": []
  }
}
```

æˆ‘ä»¬åˆ›å»ºçš„æ ¼å¼:
```json
{
  "subject_id": "LLM_Neural_Router",
  "subject_type": "TOPIC",
  "routing_parameters": {...},
  "physics_models": {...},
  "pattern_definitions": {...}
}
```

**é—®é¢˜åˆ†æ**:
1. **å‘½åä¸ä¸€è‡´**: ä½¿ç”¨`subject_id`è€Œéæ ‡å‡†`id`
2. **ç¼ºå°‘æ ‡å‡†å­—æ®µ**: ç¼ºå°‘`icon`ã€`theme`ã€`version`ï¼ˆé¡¶å±‚æœ‰versionä½†ä½ç½®ä¸å¯¹ï¼‰ã€`active`ã€`dependencies`ã€`linked_rules`
3. **ç‹¬ç«‹æ³¨å†Œè¡¨**: æœªé›†æˆåˆ°`logic_manifest.json`ä¸­

### âœ… 3. ä¸“é¢˜ç›®å½•ç»“æ„ - ç¬¦åˆè§„èŒƒ

**ä½ç½®**: `core/subjects/neural_router/`

**å®¡æŸ¥ç»“æœ**:
- âœ… ç›®å½•ç»“æ„æ¸…æ™°ï¼š`__init__.py`ã€`registry.json`ã€`registry.py`ã€`execution_kernel.py`
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ‰©å±•
- âœ… æœ‰å®Œæ•´çš„READMEæ–‡æ¡£

### âš ï¸ 4. ä¸LogicRegistryçš„é›†æˆ - ç¼ºå¤±

**å®¡æŸ¥ç»“æœ**:
- âŒ ä¸“é¢˜æœªæ³¨å†Œåˆ°`LogicRegistry`ä¸­
- âŒ æ— æ³•é€šè¿‡`LogicRegistry.get_items_by_layer("TOPIC")`è·å–
- âŒ æ— æ³•é€šè¿‡`LogicRegistry.resolve_logic_id()`è§£æä¸“é¢˜ID

## ä¿®å¤å»ºè®®

### æ–¹æ¡ˆ1: ä¿æŒç‹¬ç«‹æ³¨å†Œè¡¨ï¼ˆæ¨èç”¨äºPhase 1ï¼‰

**ä¼˜ç‚¹**:
- ç‹¬ç«‹æ€§å¼ºï¼Œä¸ä¾èµ–å·¨å¤§çš„`logic_manifest.json`
- ä¾¿äºå¿«é€Ÿå¼€å‘å’Œæµ‹è¯•
- ä¸å½±å“ç°æœ‰ç³»ç»Ÿ

**æ“ä½œ**:
- ä¿æŒå½“å‰ç»“æ„ä¸å˜
- åœ¨æ–‡æ¡£ä¸­è¯´æ˜è¿™æ˜¯ä¸´æ—¶æ–¹æ¡ˆï¼ŒPhase 2å†è€ƒè™‘é›†æˆ

### æ–¹æ¡ˆ2: é›†æˆåˆ°LogicRegistryï¼ˆå®Œæ•´é›†æˆï¼‰

**æ“ä½œæ­¥éª¤**:
1. åœ¨`logic_manifest.json`ä¸­æ·»åŠ ä¸“é¢˜æ¡ç›®ï¼ˆæ ¼å¼éœ€ç¬¦åˆæ ‡å‡†ï¼‰
2. æ›´æ–°`NeuralRouterRegistry`ï¼Œä½¿å…¶èƒ½å¤Ÿä»`LogicRegistry`è¯»å–é…ç½®
3. ç¡®ä¿ä¸“é¢˜IDä¸`LogicRegistry`çš„å‘½åè§„èŒƒä¸€è‡´

**æ ‡å‡†æ¡ç›®ç¤ºä¾‹**:
```json
{
  "MOD_LLM_Neural_Router": {
    "id": "MOD_LLM_Neural_Router",
    "name": "ğŸ§  å¤§æ¨¡å‹ç¥ç»è·¯ç”± (LLM Neural Router)",
    "name_cn": "å¤§æ¨¡å‹ç¥ç»è·¯ç”±",
    "icon": "ğŸ§ ",
    "layer": "TOPIC",
    "type": "TOPIC",
    "theme": "PATTERN_PHYSICS",
    "version": "25.0",
    "description": "[QGA V25.0] ä¸­å¤®å¤„ç†ä¸­æ¢ï¼Œè´Ÿè´£å°†å…«å­—ç‰©ç†æŒ‡çº¹æŠ•å°„åˆ°LLMçš„é€»è¾‘æ½œç©ºé—´ï¼Œå®ç°æ ¼å±€æ™ºèƒ½è·¯ç”±",
    "active": true,
    "dependencies": [],
    "linked_rules": [],
    "entry_point": {
      "module": "core.subjects.neural_router.execution_kernel",
      "class": "NeuralRouterKernel",
      "method": "process_bazi_profile"
    }
  }
}
```

### æ–¹æ¡ˆ3: æ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰

**æ“ä½œ**:
1. ä¿æŒç‹¬ç«‹çš„`registry.json`ç”¨äºä¸“é¢˜ç‰¹å®šé…ç½®ï¼ˆè·¯ç”±å‚æ•°ã€ç‰©ç†æ¨¡å‹ç­‰ï¼‰
2. åœ¨`logic_manifest.json`ä¸­æ·»åŠ æœ€å°åŒ–æ¡ç›®ï¼Œä»…ç”¨äºæ³¨å†Œåˆ°`LogicRegistry`
3. `NeuralRouterRegistry`ä¼˜å…ˆä»è‡ªå·±çš„`registry.json`è¯»å–è¯¦ç»†é…ç½®ï¼Œå¿…è¦æ—¶ä»`LogicRegistry`è¯»å–å…ƒæ•°æ®

## å…·ä½“ä¿®å¤å»ºè®®

### ç«‹å³ä¿®å¤ï¼ˆå¿…é¡»ï¼‰

1. **ç»Ÿä¸€æ ¼å±€å®šä¹‰æ•°æ®æº**
   - `PatternDefinitionRegistry`å’Œ`NeuralRouterRegistry`éƒ½å®šä¹‰äº†æ ¼å±€å®šä¹‰
   - å»ºè®®ï¼šè®©`NeuralRouterRegistry`ä»`PatternDefinitionRegistry`è¯»å–ï¼Œé¿å…é‡å¤

2. **è¡¥å……ç¼ºå¤±çš„æ ‡å‡†å­—æ®µ**
   - åœ¨`registry.json`ä¸­æ·»åŠ `icon`ã€`theme`ã€`active`ç­‰æ ‡å‡†å­—æ®µ
   - ç¡®ä¿å­—æ®µå‘½åä¸QGAè§„èŒƒä¸€è‡´

### å¯é€‰ä¿®å¤ï¼ˆPhase 2ï¼‰

1. **é›†æˆåˆ°LogicRegistry**
   - å¦‚æœéœ€è¦åœ¨UIä¸­æ˜¾ç¤ºæˆ–é€šè¿‡`LogicRegistry`è®¿é—®ï¼Œåˆ™é›†æˆ
   - å¦‚æœåªæ˜¯å†…éƒ¨ä½¿ç”¨ï¼Œå¯ä¿æŒç‹¬ç«‹

2. **åˆå¹¶æ³¨å†Œè¡¨**
   - è€ƒè™‘å°†æ ¼å±€å®šä¹‰ç»Ÿä¸€åˆ°ä¸€ä¸ªæ³¨å†Œè¡¨
   - å‡å°‘æ•°æ®é‡å¤å’Œç»´æŠ¤æˆæœ¬

## å…¼å®¹æ€§æ£€æŸ¥

### âœ… å‘åå…¼å®¹æ€§

- `PatternDefinitionRegistry`ç‹¬ç«‹è¿è¡Œï¼Œä¸å½±å“ç°æœ‰ä»£ç 
- `NeuralRouterRegistry`ç‹¬ç«‹è¿è¡Œï¼Œä¸å½±å“ç°æœ‰ä»£ç 
- Phase 1çš„é€»è¾‘çœŸç©ºåŒ–ä¸ä¾èµ–ä¸“é¢˜æ³¨å†Œæœºåˆ¶

### âš ï¸ æœªæ¥å…¼å®¹æ€§

- å¦‚æœæœªæ¥éœ€è¦å°†ä¸“é¢˜é›†æˆåˆ°UIæˆ–å…¶ä»–ç³»ç»Ÿï¼Œéœ€è¦è¡¥å……`LogicRegistry`é›†æˆ
- å¦‚æœæ ¼å±€å®šä¹‰éœ€è¦ç»Ÿä¸€ç®¡ç†ï¼Œéœ€è¦é‡æ„æ•°æ®æº

## æ€»ç»“

**å½“å‰çŠ¶æ€**:
- âœ… Phase 1çš„é€»è¾‘çœŸç©ºåŒ–ç¬¦åˆè§„èŒƒ
- âš ï¸ ä¸“é¢˜æ³¨å†Œæœºåˆ¶ç‹¬ç«‹äºQGAæ ‡å‡†ï¼Œä½†åŠŸèƒ½å®Œæ•´
- âœ… ä»£ç ç»“æ„æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤

**å»ºè®®**:
1. **çŸ­æœŸï¼ˆPhase 1ï¼‰**: ä¿æŒå½“å‰ç‹¬ç«‹æ³¨å†Œè¡¨ç»“æ„ï¼Œè¡¥å……æ ‡å‡†å­—æ®µ
2. **ä¸­æœŸï¼ˆPhase 2ï¼‰**: æ ¹æ®å®é™…éœ€æ±‚å†³å®šæ˜¯å¦é›†æˆåˆ°`LogicRegistry`
3. **é•¿æœŸ**: è€ƒè™‘ç»Ÿä¸€æ ¼å±€å®šä¹‰æ•°æ®æºï¼Œå‡å°‘é‡å¤

**é£é™©è¯„ä¼°**: ä½
- å½“å‰è®¾è®¡ä¸å½±å“ç°æœ‰ç³»ç»Ÿ
- æœªæ¥é›†æˆæˆæœ¬å¯æ§
- ä»£ç è´¨é‡è‰¯å¥½

