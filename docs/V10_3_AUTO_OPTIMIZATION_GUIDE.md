# V10.3 è‡ªåŠ¨ä¼˜åŒ–æŒ‡å—

**ç‰ˆæœ¬**: V10.3  
**çŠ¶æ€**: âœ… è‡ªåŠ¨ç›‘æ§æœåŠ¡å·²åˆ›å»º

---

## ğŸ“‹ å½“å‰çŠ¶æ€

### âœ… å·²å®ç°çš„ç»„ä»¶

1. **MCP Server** (`scripts/v10_2_mcp_server.py`)
   - âœ… æä¾›å·¥å…·æ¥å£ï¼š`run_physics_diagnosis()`
   - âœ… æä¾›å·¥å…·æ¥å£ï¼š`configure_optimization_strategy()`
   - âœ… æä¾›å·¥å…·æ¥å£ï¼š`execute_optuna_study()`

2. **AutoDriver** (`scripts/v10_2_auto_driver.py`)
   - âœ… è‡ªåŠ¨æ‰§è¡Œ3ä¸ªPhaseçš„è°ƒä¼˜
   - âœ… æ”¯æŒCheckpointå’ŒAuto-Rollback

3. **è‡ªåŠ¨ç›‘æ§æœåŠ¡** (`scripts/v10_3_auto_monitor.py`) â­ **æ–°å¢**
   - âœ… å®šæœŸè¿è¡Œè¯Šæ–­
   - âœ… è‡ªåŠ¨è§¦å‘ä¼˜åŒ–
   - âœ… æŒç»­ç›‘æ§ç›´åˆ°è¾¾åˆ°ç›®æ ‡

---

## â“ å…³äºCursorè‡ªåŠ¨æ‰§è¡Œ

### å½“å‰çŠ¶æ€

**âŒ Cursorä¸ä¼šè‡ªåŠ¨æ‰§è¡Œä¼˜åŒ–**

åŸå› ï¼š
- MCPåè®®æä¾›äº†å·¥å…·æ¥å£ï¼Œä½†éœ€è¦**æ‰‹åŠ¨è°ƒç”¨**
- Cursorä¸ä¼šè‡ªåŠ¨æ£€æµ‹æ€§èƒ½é—®é¢˜å¹¶è§¦å‘ä¼˜åŒ–
- éœ€è¦ä½ ä¸»åŠ¨å‘Šè¯‰Cursor"è¿è¡Œè¯Šæ–­"æˆ–"å¼€å§‹ä¼˜åŒ–"

### å¦‚ä½•å®ç°è‡ªåŠ¨åŒ–

#### æ–¹æ¡ˆ1: ä½¿ç”¨è‡ªåŠ¨ç›‘æ§æœåŠ¡ï¼ˆæ¨èï¼‰â­

**è¿™æ˜¯æœ€æ¥è¿‘"è‡ªåŠ¨æ‰§è¡Œ"çš„æ–¹æ¡ˆ**ï¼š

```bash
# å‰å°è¿è¡Œï¼ˆæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼‰
python3 scripts/v10_3_auto_monitor.py --interval 3600

# åå°è¿è¡Œï¼ˆæ¨èï¼‰
nohup python3 scripts/v10_3_auto_monitor.py --daemon &
```

**å·¥ä½œåŸç†**ï¼š
1. å®šæœŸè¿è¡Œè¯Šæ–­ï¼ˆé»˜è®¤æ¯å°æ—¶ï¼‰
2. å¦‚æœåŒ¹é…ç‡ä½äºé˜ˆå€¼ï¼ˆé»˜è®¤55%ï¼‰ï¼Œè‡ªåŠ¨è§¦å‘ä¼˜åŒ–
3. æŒç»­ç›‘æ§ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡åŒ¹é…ç‡ï¼ˆé»˜è®¤65%ï¼‰

**ç‰¹ç‚¹**ï¼š
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„
- âœ… åå°è¿è¡Œï¼Œä¸å½±å“å…¶ä»–å·¥ä½œ
- âœ… è‡ªåŠ¨è®°å½•æ—¥å¿—åˆ° `logs/auto_monitor.log`

#### æ–¹æ¡ˆ2: æ‰‹åŠ¨è¿è¡Œè‡ªåŠ¨è°ƒä¼˜

```bash
# è¿è¡Œå®Œæ•´çš„3ä¸ªPhaseè°ƒä¼˜
python3 scripts/v10_2_auto_driver.py --mode auto

# åªè¿è¡ŒPhase 1
python3 scripts/v10_2_auto_driver.py --mode phase1
```

#### æ–¹æ¡ˆ3: åœ¨Cursorä¸­æ‰‹åŠ¨è°ƒç”¨MCPå·¥å…·

è™½ç„¶Cursorä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œä½†ä½ å¯ä»¥ï¼š

1. **åœ¨Cursorä¸­è¿è¡Œè¯Šæ–­**ï¼š
   ```python
   from scripts.v10_2_mcp_server import MCPTuningServer
   server = MCPTuningServer()
   diagnosis = server.run_physics_diagnosis()
   print(f"åŒ¹é…ç‡: {diagnosis['current_match_rate']:.1f}%")
   ```

2. **åœ¨Cursorä¸­è§¦å‘ä¼˜åŒ–**ï¼š
   ```python
   from scripts.v10_2_auto_driver import AutoDriver
   driver = AutoDriver()
   result = driver.run_full_auto()
   ```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨è‡ªåŠ¨ç›‘æ§æœåŠ¡

```bash
cd /home/jin/bazi_predict
source venv/bin/activate

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs

# å¯åŠ¨è‡ªåŠ¨ç›‘æ§ï¼ˆæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼‰
python3 scripts/v10_3_auto_monitor.py --interval 3600
```

### é…ç½®å‚æ•°

```bash
# è‡ªå®šä¹‰ç›®æ ‡åŒ¹é…ç‡å’Œè§¦å‘é˜ˆå€¼
python3 scripts/v10_3_auto_monitor.py \
    --target 70.0 \      # ç›®æ ‡åŒ¹é…ç‡
    --trigger 60.0 \     # è§¦å‘ä¼˜åŒ–çš„é˜ˆå€¼
    --interval 1800      # æ£€æŸ¥é—´éš”ï¼ˆ30åˆ†é’Ÿï¼‰
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/auto_monitor.log

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—
tail -100 logs/auto_monitor.log
```

---

## ğŸ“Š å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯åŠ¨ç›‘æ§æœåŠ¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®šæœŸè¿è¡Œè¯Šæ–­    â”‚  â† æ¯å°æ—¶ï¼ˆå¯é…ç½®ï¼‰
â”‚  (è§‚å¯Ÿ)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
   åŒ¹é…ç‡ < é˜ˆå€¼?
         â”‚
    Yes  â”‚  No
         â”‚   â†“
         â”‚   â””â”€â†’ ç­‰å¾…ä¸‹æ¬¡æ£€æŸ¥
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œè‡ªåŠ¨ä¼˜åŒ–    â”‚  â† 3ä¸ªPhase
â”‚  (è¡ŒåŠ¨)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¾¾åˆ°ç›®æ ‡?       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    Yes  â”‚  No
         â”‚   â†“
         â”‚   â””â”€â†’ ç»§ç»­ç›‘æ§
         â”‚
         â†“
   åœæ­¢ä¼˜åŒ–
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### è‡ªåŠ¨ç›‘æ§æœåŠ¡å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--target` | 65.0 | ç›®æ ‡åŒ¹é…ç‡ï¼ˆè¾¾åˆ°ååœæ­¢ä¼˜åŒ–ï¼‰ |
| `--trigger` | 55.0 | è§¦å‘ä¼˜åŒ–çš„é˜ˆå€¼ï¼ˆä½äºæ­¤å€¼è‡ªåŠ¨ä¼˜åŒ–ï¼‰ |
| `--interval` | 3600 | æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼Œé»˜è®¤1å°æ—¶ï¼‰ |
| `--max-iterations` | None | æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼ˆNoneè¡¨ç¤ºæ— é™ï¼‰ |
| `--daemon` | False | åå°è¿è¡Œæ¨¡å¼ |

### ä¼˜åŒ–ç­–ç•¥

è‡ªåŠ¨ç›‘æ§æœåŠ¡ä¼šæ ¹æ®è¯Šæ–­ç»“æœè‡ªåŠ¨é€‰æ‹©ä¼˜åŒ–ç­–ç•¥ï¼š

- **Special_Strongé—®é¢˜** â†’ æ‰§è¡Œé€»è¾‘é‡æ„ï¼ˆV10.3å·²å®æ–½ï¼‰
- **Strongâ†”Weakäº’åˆ¤** â†’ ä¼˜åŒ–ç»“æ„å±‚
- **å…¶ä»–é—®é¢˜** â†’ æ‰§è¡Œå…¨é‡ä¼˜åŒ–

---

## ğŸ“ æ—¥å¿—ç¤ºä¾‹

```
2025-01-XX 13:00:00 - INFO - ğŸ¤– è‡ªåŠ¨ç›‘æ§æœåŠ¡å¯åŠ¨
2025-01-XX 13:00:00 - INFO - ç›®æ ‡åŒ¹é…ç‡: 65.0%
2025-01-XX 13:00:00 - INFO - è§¦å‘é˜ˆå€¼: 55.0%
2025-01-XX 13:00:00 - INFO - æ£€æŸ¥é—´éš”: 3600ç§’ (60.0åˆ†é’Ÿ)

2025-01-XX 13:00:01 - INFO - ğŸ” [è§‚å¯Ÿ] è¿è¡Œç‰©ç†è¯Šæ–­...
2025-01-XX 13:00:02 - INFO - ğŸ“Š å½“å‰åŒ¹é…ç‡: 51.4%
2025-01-XX 13:00:02 - INFO - ğŸ¯ é¦–æ¬¡è¿è¡Œï¼ŒåŒ¹é…ç‡ 51.4% ä½äºç›®æ ‡ 65.0%ï¼Œå¼€å§‹ä¼˜åŒ–

2025-01-XX 13:00:03 - INFO - ğŸš€ [è¡ŒåŠ¨] å¼€å§‹è‡ªåŠ¨ä¼˜åŒ–...
2025-01-XX 13:00:03 - INFO - ğŸ“Œ æ£€æµ‹åˆ°Special_Strongé—®é¢˜ï¼Œæ‰§è¡Œé€»è¾‘é‡æ„ï¼ˆV10.3ï¼‰
...
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **é¦–æ¬¡è¿è¡Œ**ï¼š
   - å…ˆæ‰‹åŠ¨è¿è¡Œä¸€æ¬¡è¯Šæ–­ï¼Œäº†è§£å½“å‰çŠ¶æ€
   - ç„¶åå¯åŠ¨è‡ªåŠ¨ç›‘æ§æœåŠ¡

2. **ç”Ÿäº§ç¯å¢ƒ**ï¼š
   - ä½¿ç”¨åå°è¿è¡Œæ¨¡å¼ï¼ˆ`--daemon`ï¼‰
   - è®¾ç½®åˆç†çš„æ£€æŸ¥é—´éš”ï¼ˆå»ºè®®1-4å°æ—¶ï¼‰

3. **å¼€å‘ç¯å¢ƒ**ï¼š
   - ä½¿ç”¨è¾ƒçŸ­çš„æ£€æŸ¥é—´éš”ï¼ˆå¦‚30åˆ†é’Ÿï¼‰
   - å‰å°è¿è¡Œï¼Œæ–¹ä¾¿æŸ¥çœ‹æ—¥å¿—

4. **ç›‘æ§æ—¥å¿—**ï¼š
   - å®šæœŸæ£€æŸ¥æ—¥å¿—ï¼Œç¡®è®¤ä¼˜åŒ–è¿›å±•
   - å¦‚æœä¼˜åŒ–æ•ˆæœä¸ä½³ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒæ•´ç­–ç•¥

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- `docs/V10_2_AUTO_TUNING_ARCHITECTURE.md` - V10.2è‡ªåŠ¨è°ƒä¼˜æ¶æ„
- `docs/V10_3_LOGIC_REFACTORING_SUMMARY.md` - V10.3é€»è¾‘é‡æ„æ€»ç»“
- `scripts/v10_3_auto_monitor.py` - è‡ªåŠ¨ç›‘æ§æœåŠ¡æºç 

