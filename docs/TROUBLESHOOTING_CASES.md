# 🔧 案例导入故障排除指南

## 问题：页面只显示2个案例，应该有5个

### 可能的原因

1. **转换脚本未运行**
   - 转换脚本 `scripts/convert_gemini_to_jason.py` 可能没有成功执行
   - 或者只成功导入了部分案例

2. **数据文件格式问题**
   - JSON文件格式不正确
   - 文件保存失败

3. **文件路径问题**
   - `data` 目录不存在
   - 文件路径错误

---

## 🔍 诊断步骤

### 步骤1：检查已导入的案例

运行诊断脚本：

```bash
python3 scripts/check_imported_cases.py
```

这将显示：
- 当前系统中有多少个案例
- 每个案例的详细信息
- 数据目录的状态

### 步骤2：手动导入所有5个案例

如果诊断显示案例不足，运行手动导入脚本：

```bash
python3 scripts/manual_import_jason_cases.py
```

这个脚本会：
- 创建所有5个Jason案例
- 计算实际大运
- 自动导入到系统
- 验证导入结果

---

## ✅ 解决方案

### 方案1：运行手动导入脚本（推荐）

```bash
python3 scripts/manual_import_jason_cases.py
```

**预期输出：**
```
📥 手动导入5个Jason案例
📋 创建案例...
✅ 已创建 5 个案例
💾 导入案例...
✅ 成功导入 5/5 个案例
📊 导入的案例列表：
   - Jason A (财富爆发) (JASON_A_T1978_1115)
   - Jason B (身弱用印) (JASON_B_T1964_0910)
   - Jason C (稳定积累) (JASON_C_T1980_0920)
   - Jason D (财库连冲) (JASON_D_T1961_1010)
   - Jason E (截脚测试) (JASON_E_T1955_0224)
🔍 验证导入结果...
✅ 系统中共有 5 个案例
```

### 方案2：通过UI导入

1. 启动应用：`streamlit run main.py`
2. 访问"💰 财富验证"页面
3. 在侧边栏上传JSON文件
4. 点击"导入案例"

**注意**：需要先将5个案例的JSON数据合并成一个数组。

---

## 📋 5个案例清单

确保以下5个案例都已导入：

1. **Jason A (财富爆发)** - `JASON_A_T1978_1115`
   - 八字: 戊午 癸亥 壬戌 丁未
   - 事件: 4个

2. **Jason B (身弱用印)** - `JASON_B_T1964_0910`
   - 八字: 甲辰 癸酉 己亥 戊辰
   - 事件: 3个

3. **Jason C (稳定积累)** - `JASON_C_T1980_0920`
   - 八字: 庚申 乙酉 辛未 甲午
   - 事件: 3个

4. **Jason D (财库连冲)** - `JASON_D_T1961_1010`
   - 八字: 辛丑 丁酉 庚辰 丙戌
   - 事件: 3个

5. **Jason E (截脚测试)** - `JASON_E_T1955_0224`
   - 八字: 乙未 戊寅 壬午 庚戌
   - 事件: 3个

---

## 🔍 验证导入成功

导入后，在UI中应该看到：

1. **案例选择器**：下拉菜单中有5个选项
2. **案例信息**：选择每个案例时，显示正确的八字和日主
3. **事件列表**：每个案例都有对应数量的事件

如果只看到2个案例，请：

1. 运行诊断脚本检查
2. 运行手动导入脚本
3. 刷新UI页面（按F5或点击刷新按钮）

---

## 🐛 常见错误

### 错误1：`ModuleNotFoundError`
**原因**：Python路径问题  
**解决**：确保在项目根目录运行脚本

### 错误2：`FileNotFoundError: data directory`
**原因**：数据目录不存在  
**解决**：脚本会自动创建，如果失败，手动创建 `data` 目录

### 错误3：`JSON decode error`
**原因**：JSON格式错误  
**解决**：检查JSON文件格式，确保符合WealthCaseModel的要求

---

## 📞 需要帮助？

如果问题仍然存在，请：

1. 运行诊断脚本并查看输出
2. 检查 `data` 目录中的文件
3. 查看控制台错误信息
4. 提供详细的错误信息以便进一步诊断

---

**文档更新时间**: 2024  
**维护者**: Quantum Bazi GEM Team

